name: Manual Deploy ðŸš€

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'ÐšÑƒÐ´Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ñ—Ð¼Ð¾?'
        required: true
        default: 'development'
        type: choice
        options:
          - development
          - production

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment:
      name: ${{ inputs.environment }}
      url: ${{ inputs.environment == 'production' && 'https://rentora.site' || 'https://dev.rentora.site' }}

    steps:
      - name: Deploying to ${{ inputs.environment }}
        run: echo "Starting deployment..."

      - name: Trigger Dev Webhooks
        if: ${{ inputs.environment == 'development' }}
        run: |
          curl -X POST ${{ secrets.WEBHOOK_BACKEND_DEV }}
          curl -X POST ${{ secrets.WEBHOOK_FRONTEND_DEV }}
          echo "âœ… Signal sent to Dockploy (DEV)"

      - name: Trigger Prod Webhooks
        if: ${{ inputs.environment == 'production' }}
        run: |
          curl -X POST ${{ secrets.WEBHOOK_BACKEND_PROD }}
          curl -X POST ${{ secrets.WEBHOOK_FRONTEND_PROD }}
          echo "âœ… Signal sent to Dockploy (PROD)"